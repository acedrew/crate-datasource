{"version":3,"sources":["../src/response_handler.js"],"names":[],"mappings":";;;;;;;AAAO,O;;;AAEA,eAAS,eAAT,CAAyB,MAAzB,EAAiC,QAAjC,EAA2C;AAChD,YAAI,gBAAJ;AACA,YAAI,kBAAkB,EAAE,SAAF,CAAY,OAAO,aAAnB,EAAkC,eAAO;AAC7D,iBAAO,QAAQ,OAAO,OAAtB;AACD,SAFqB,CAAtB;;AAIA,YAAI,oBAAoB,CAAxB,EAA2B;AACzB,6BAAmB,CAAnB;AACD,SAFD,MAEO;AACL,6BAAmB,CAAnB;AACD;;AAED,YAAI,aAAa,EAAE,GAAF,CAAM,SAAS,IAAT,CAAc,IAApB,EAA0B,eAAO;AAChD,iBAAO,CACL,OAAO,IAAI,gBAAJ,CAAP,CADK,E;AAEL,iBAAO,IAAI,eAAJ,CAAP,C;AAFK,WAAP;AAID,SALgB,CAAjB;;AAOA,eAAO;AACL,kBAAQ,OAAO,KADV;AAEL,sBAAY;AAFP,SAAP;AAID","file":"response_handler.js","sourcesContent":["import _ from 'lodash';\n\nexport function handle_response(target, response) {\n  var valueColumnIndex;\n  var timeColumnIndex = _.findIndex(target.selectColumns, col => {\n    return col === target.orderBy;\n  });\n\n  if (timeColumnIndex === 0) {\n    valueColumnIndex = 1;\n  } else {\n    valueColumnIndex = 0;\n  }\n\n  var datapoints = _.map(response.data.rows, row => {\n    return [\n      Number(row[valueColumnIndex]), // value\n      Number(row[timeColumnIndex])  // timestamp\n    ];\n  });\n\n  return {\n    target: target.table,\n    datapoints: datapoints\n  };\n}"]}